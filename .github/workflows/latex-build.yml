name: Build PDFs

on:
  push:
    branches: [ "main" ]

jobs:
  build-latex:
    runs-on: ubuntu-latest

    steps:
      - name: Check out repository
        uses: actions/checkout@v2

      - name: Build Docker image
        run: docker build -t my-latex-builder ./docker

      - name: Run Docker container
        # Примонтируем текущую папку (github.workspace) в контейнер,
        # чтобы итоговые PDF сохранились на хосте, а не только внутри контейнера
        run: docker run --rm -v ${{ github.workspace }}:/app my-latex-builder

      - name: Upload CV. Evgeny Baulin. Programmer Analyst.pdf artifact
        uses: actions/upload-artifact@v3
        with:
          name: CV-Programmer-Analyst
          path: './CV. Evgeny Baulin. Programmer Analyst.pdf'

      - name: Upload CV. Evgeny Baulin. Full Stack Developer.pdf artifact
        uses: actions/upload-artifact@v3
        with:
          name: CV-Full-Stack-developer
          path: './CV. Evgeny Baulin. Full Stack Developer.pdf'
